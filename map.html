<!DOCTYPE HTML>
<html>
	 <head>
    <meta name="viewport" content="width=320; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>PIE</title>
	  <link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title" charset="utf-8">
	  <script type="text/javascript" charset="utf-8" src="phonegap.0.9.4.min.js"></script>
	  <script type="text/javascript" charset="utf-8" src="main.js"></script>
	  <script type="text/javascript" src="http://ditu.google.cn/maps/api/js?sensor=false&key=ABQIAAAA120P33oO1v5NEe4O2cQNZhQpWdALl1kD5mqNzkiNw8_becLMzhTLvneiBolCE__EUDHHKWk5h5QUGA"></script>
<script type="text/javascript">
var Demo = {
  map: null,
  infoWindow: null
};
  
/**
 * Called when clicking anywhere on the map and closes the info window.
 */
Demo.closeInfoWindow = function() {
  Demo.infoWindow.close();
};

/**
 * Opens the shared info window, anchors it to the specified marker, and
 * displays the marker's position as its content.
 */
Demo.openInfoWindow = function(marker,content) {
  var markerLatLng = marker.getPosition();
  Demo.infoWindow.setContent(content);
  Demo.infoWindow.open(Demo.map, marker);
},

/**
 * Called only once on initial page load to initialize the map.
 */
Demo.init = function() {
  // Create single instance of a Google Map.
  var centerLatLng = new google.maps.LatLng(31.200719,121.444185);//港汇广场
  Demo.map = new google.maps.Map(document.getElementById('map-canvas'), {
    zoom: 13,
    center: centerLatLng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  
  // Create a single instance of the InfoWindow object which will be shared
  // by all Map objects to display information to the user.
  Demo.infoWindow = new google.maps.InfoWindow();
  
  // Make the info window close when clicking anywhere on the map.
  google.maps.event.addListener(Demo.map, 'click', Demo.closeInfoWindow);
  
  // Add multiple markers in a few random locations around San Francisco.
  // First random marker
  var marker1 = new google.maps.Marker({
    map: Demo.map,
    position: centerLatLng
  });
   
  // Register event listeners to each marker to open a shared info
  // window displaying the marker's position when clicked or dragged.
  google.maps.event.addListener(marker1, 'click', function() {
    Demo.openInfoWindow(marker1,'伯昭的朋友：港汇广场3楼的日本料理不错');
  });
  
  // Second random marker
  var marker2 = new google.maps.Marker({
    map: Demo.map,
    position: new google.maps.LatLng(31.202709,121.427635),//天主教堂
    draggable: true
  });
   
  // Register event listeners to each marker to open a shared info
  // window displaying the marker's position when clicked or dragged.
  google.maps.event.addListener(marker2, 'click', function() {
    Demo.openInfoWindow(marker2,'伯昭：靠，偶还在上班呢');
  });
  
  // Third random marker
  var marker3 = new google.maps.Marker({
    map: Demo.map,
    position: new google.maps.LatLng(31.184464,121.441312),//宜家
    draggable: true
  });
   
  // Register event listeners to each marker to open a shared info
  // window displaying the marker's position when clicked or dragged.
  google.maps.event.addListener(marker3, 'click', function() {
    Demo.openInfoWindow(marker3, '王岩：这里的澡堂子不错');
  });
  document.addEventListener("deviceready", onDeviceReady, false);
}
//PhoneGap is ready
  //
  function onDeviceReady() {
      navigator.geolocation.getCurrentPosition(onSuccess, onError);
  }

  // onSuccess Geolocation
  //
  function onSuccess(position) {
      var element = document.getElementById('geolocation');
      element.innerHTML = 'Latitude: '           + position.coords.latitude              + '<br />' +
                          'Longitude: '          + position.coords.longitude             + '<br />' +
                          'Altitude: '           + position.coords.altitude              + '<br />' +
                          'Accuracy: '           + position.coords.accuracy              + '<br />' +
                          'Altitude Accuracy: '  + position.coords.altitudeAccuracy      + '<br />' +
                          'Heading: '            + position.coords.heading               + '<br />' +
                          'Speed: '              + position.coords.speed                 + '<br />' +
                          'Timestamp: '          + new Date(position.timestamp)          + '<br />';
  }

  // onError Callback receives a PositionError object
  //
  function onError(error) {
      alert('code: '    + error.code    + '\n' +
            'message: ' + error.message + '\n');
  }

</script> 

  </head>
<body onload="Demo.init();">
<div id="top">
<ul>
<li><img src="img/avatar1.jpeg" width="50" height="50">
</li>
<li>
<img src="img/avatar2.jpeg" width="50" height="50">
</li>
<li><img src="img/avatar3.jpeg" width="50" height="50"></li>
</ul>
</div>
<div id="main">
<!-- iframe width="100%" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://bendi.google.cn/maps?f=q&amp;source=s_q&amp;hl=cn&amp;geocode=&amp;q=xujiahui&amp;sll=37.0625,-95.677068&amp;sspn=45.957536,88.945313&amp;ie=UTF8&amp;hq=xujiahui&amp;hnear=&amp;radius=15000&amp;z=13&amp;iwloc=A&amp;cid=6940221176871353395&amp;ll=31.191174,121.43605&amp;output=embed"></iframe-->
<div id="map-canvas" style="width:100%; height:350px"></div>
</div>
<div id="bottom">
<ul>
<li style="width:50%"><a href="index.html"><img src="img/stream.png" width="53" height="40" /></a></li>
<li style="width:50%"><img src="img/mylocation.png" width="30" height="30" style="padding-top:5px;"></li>
<ul>
</table>
</div>
</body>
</html>